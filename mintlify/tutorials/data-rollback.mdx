---
title: Data Change with 1-Click Rollback
author: Adela
updated_at: 2024/09/20 16:15
tags: Tutorial
integrations: General
category: 'Database CI/CD (GUI)'
featured: true
level: Beginner
estimated_time: '30 mins'
---

import PreparationWithSampleData from '/snippets/tutorials/preparation-with-sample-data.mdx';

When changing data in the database, it's advisable to have a backup of the data you plan to modify in case you need to roll back. Bytebase offers a feature called [**1-Click Data Rollback**](/change-database/rollback-data-changes/) to assist with this. You can also enable auto-backup feature to automatically backup the data when you create a change data issue. This tutorial will guide you through this process.

![rollback-graph](/content/docs/tutorials/data-rollback/rollback-graph.webp)

## Step 1 - Start Bytebase with sample data

<PreparationWithSampleData />

## Step 2 - Prepare schema `bbdataarchive`

Bytebase stores the backup data in a dedicated place. For Postgres, it's stored under the `bbdataarchive` schema for the changing database.

By using the sample data, we can skip the step of creating the `bbdataarchive` schema.

Go to `Sample Project`, click **Database > Databases** on the left side, choose `hr_test`, you'll see the `bbdataarchive` schema is already created. It's the same with `hr_prod` database.

   ![hr_test-bbdataarchive](/content/docs/tutorials/data-rollback/bb-hr_test-bbdataarchive.webp)

## Step 3 - Change Data with Backup

1. Before the change, go to **SQL Editor**, choose `hr_test` and double click `employee` table, and you'll see the current data. We'll try to change the `first_name` for `Georgi`.

   ![bb-sql-editor-before-change](/content/docs/tutorials/data-rollback/bb-sql-editor-before-change.webp)

1. Go to `Sample Project` and **CI/CD > Plans**, click **+New Plan** and select **Data Change**. Choose `hr_test` database, and then click **Confirm**.

1. Turn on **Prior Backup** on the bottom, input the SQL into the field, and then click **Create** and click **Ready for review**.

   ```sql
   UPDATE employee SET first_name = 'Adela' WHERE emp_no = 10001;
   ```

1. Click **Rollout** tab and then click **run** to execute the change immediately.

   ![bb-to-rollout](/content/docs/tutorials/data-rollback/bb-to-rollout.webp)

1. After the change is rolled out, you can see there is an activity saying the data is backed up to a new table under the previously created `bbdataarchive` schema under the **Overview** tab.

1. Go to **Database > Databases** again, and click `hr_test` to the database detail page.  Choose `bbdataarchive` schema, and you can see the backup table.

1. To verify, go to **SQL Editor**. Choose `employee` table in `hr_test` under `public` schema, input the following SQL script and click **Run**, and you'll see the data is changed.

   ```sql
      SELECT * FROM "public"."employee" ORDER BY emp_no LIMIT 50;
   ```

   ![sql-editor-after-change](/content/docs/tutorials/data-rollback/bb-sql-editor-after-change.webp)

1. Choose `bbdataarchive` schema, and double-click the table below. You'll see the backup data in the query result.

## Step 4 - 1-Click Rollback Data

1. Under the **Rollout** tab, you can see the change is executed successfully and there's a rollback available. Click the available rollback button.

   ![rollback-available](/content/docs/tutorials/data-rollback/bb-rollback-available.webp)

1. A SQL will be generated to rollback the change. Click **Confirm** to create a rollback issue and then click **Ready for Review** and then click **Rollout** to execute the rollback.

1. After the rollback is executed, you can go to **SQL Editor** to verify the data is rolled back.

## Step 5 - Enable Auto-Backup

1. Go to **Setting** in the project, there're two options under **Issue related**:

   - Auto enable backup
   - Skip backup errors

   If you don't want to turn on the backup feature every time you create a change data issue.

## Noteworthy Difference

If you want to use MySQL/SQL Server/Oracle, instead of creating a `bbdataarchive` schema, you should create a `bbdataarchive` **database** instead of **schema** to store the backup data. Check the doc for more details.

<Card title="Data Rollback Doc" icon="book" href="/change-database/rollback-data-changes/" horizontal />
